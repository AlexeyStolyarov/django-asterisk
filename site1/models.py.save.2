from __future__ import unicode_literals

from django.db import models
from django.contrib.auth.models import User
# Create your models here.

import random; import string;

class organization(models.Model):
	name				= models.CharField(max_length=20,blank=False,null=False)
	tftp_dir			= models.CharField(max_length=30,blank=False,null=False)
		
	def __unicode__(self):
		return u'%s' % (self.name)

		
class device(models.Model):
	organization		= models.ForeignKey(organization)
	mac_address			= models.CharField(max_length=12,blank=False,null=False)
	#locked
	last_connection		= models.DateTimeField(blank=True,null=True)
	sip_server			= models.CharField(max_length=20,blank=False,null=False, default='sip.phone.suissephone.ch')
	sip_user			= models.CharField(max_length=12,blank=False,null=False)
	sip_password		= models.CharField(max_length=12,blank=False,null=False)
	phone_number		= models.CharField(max_length=20,blank=False,null=False)
	customer_no			= models.CharField(max_length=12,blank=False,null=False)
	customer_fname		= models.CharField(max_length=20,blank=False,null=False,verbose_name='Customer First name')
	customer_lname		= models.CharField(max_length=20,blank=False,null=False,verbose_name='Customer Second name')
	customer_address	= models.CharField(max_length=40,blank=False,null=False)
	customer_zip		= models.CharField(max_length=12,blank=False,null=False)
	customer_city		= models.CharField(max_length=12,blank=False,null=False)
	sip_msg_server		= models.CharField(max_length=12,blank=False,null=False, default='ata.sipstar.ch')
	sip_msg_user		= models.CharField(max_length=12,blank=False,null=False)
	sip_msg_password	= models.CharField(max_length=12,blank=False,null=False)
	inet_type			= models.CharField(max_length=12,blank=True,null=True)
	signal_strenght		= models.CharField(max_length=12,blank=True,null=True)
	sip_voip_registered	= models.CharField(max_length=6,blank=True,null=True, verbose_name='Registered on VoIP server')
	sip_control_registered	= models.CharField(max_length=6,blank=True,null=True, verbose_name='Registered on managment server')

	version			= models.IntegerField(default=1)
	#last_registration	
	def __unicode__(self):
		return u'%s' % (self.mac_address)


class Employee(models.Model):
	user 				= models.OneToOneField(User, on_delete=models.CASCADE)
	organization		= models.ForeignKey(organization)
	def __unicode__(self):
		return u'%s %s' % (self.user.first_name, self.user.last_name)
			


